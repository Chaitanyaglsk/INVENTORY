import sqlite3
import tkinter as tk
from tkinter import messagebox

# Database Setup
conn = sqlite3.connect("inventory.db")
cursor = conn.cursor()
cursor.execute("""
    CREATE TABLE IF NOT EXISTS products (
        id INTEGER PRIMARY KEY,
        name TEXT NOT NULL,
        quantity INTEGER NOT NULL,
        price REAL NOT NULL
    )
""")
conn.commit()

# Functions
def add_product():
    name = name_entry.get()
    quantity = int(quantity_entry.get())
    price = float(price_entry.get())
    
    cursor.execute("INSERT INTO products (name, quantity, price) VALUES (?, ?, ?)", (name, quantity, price))
    conn.commit()
    messagebox.showinfo("Success", "Product added successfully!")
    update_listbox()

def update_listbox():
    listbox.delete(0, tk.END)
    cursor.execute("SELECT * FROM products")
    for row in cursor.fetchall():
        listbox.insert(tk.END, row)

def delete_product():
    selected_item = listbox.curselection()
    if selected_item:
        product_id = listbox.get(selected_item)[0]
        cursor.execute("DELETE FROM products WHERE id=?", (product_id,))
        conn.commit()
        messagebox.showinfo("Success", "Product deleted successfully!")
        update_listbox()

# GUI Setup
root = tk.Tk()
root.title("Inventory Management")

tk.Label(root, text="Name:").grid(row=0, column=0)
tk.Label(root, text="Quantity:").grid(row=1, column=0)
tk.Label(root, text="Price:").grid(row=2, column=0)

name_entry = tk.Entry(root)
quantity_entry = tk.Entry(root)
price_entry = tk.Entry(root)

name_entry.grid(row=0, column=1)
quantity_entry.grid(row=1, column=1)
price_entry.grid(row=2, column=1)

tk.Button(root, text="Add Product", command=add_product).grid(row=3, column=0, columnspan=2)
tk.Button(root, text="Delete Product", command=delete_product).grid(row=4, column=0, columnspan=2)

listbox = tk.Listbox(root)
listbox.grid(row=5, column=0, columnspan=2, sticky="nsew")

update_listbox()
root.mainloop()

conn.close()
